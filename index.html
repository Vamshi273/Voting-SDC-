<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saptarang Freshers Day Voting</title>
<style>
body { font-family: Arial, sans-serif; background:#111; color:#fff; margin:0; padding:20px;}
h1 { text-align:center;}
.grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; margin-top:20px;}
.card { background:#222; border-radius:12px; padding:10px; text-align:center; box-shadow:0 0 10px rgba(0,0,0,0.5);}
.card img { max-width:100%; border-radius:8px;}
.vote-btn { margin-top:10px; padding:8px 16px; border:none; border-radius:8px; cursor:pointer; background:#ff4757; color:#fff; font-weight:bold;}
.vote-btn:disabled { background:#555; cursor:not-allowed;}
#resultsModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); overflow:auto;}
#resultsContent { background:#222; margin:5% auto; padding:20px; width:90%; max-width:600px; border-radius:12px;}
.close-btn { float:right; cursor:pointer; font-size:20px;}
</style>
</head>
<body>
<h1>Saptarang Freshers Day Voting</h1>
<div class="grid" id="cards"></div>

<!-- Results Modal -->
<div id="resultsModal">
  <div id="resultsContent">
    <span class="close-btn" onclick="toggleResults()">&times;</span>
    <h2>Voting Results</h2>
    <ul id="resultsList"></ul>
    <button onclick="resetVotes()">Reset Votes</button>
  </div>
</div>

<script>
const contestants = [
  {name:"Rohan", img:"https://via.placeholder.com/200x250?text=Rohan", gender:"Male"},
  {name:"Amit", img:"https://via.placeholder.com/200x250?text=Amit", gender:"Male"},
  {name:"Vikram", img:"https://via.placeholder.com/200x250?text=Vikram", gender:"Male"},
  {name:"Sahil", img:"https://via.placeholder.com/200x250?text=Sahil", gender:"Male"},
  {name:"Priya", img:"https://via.placeholder.com/200x250?text=Priya", gender:"Female"},
  {name:"Anjali", img:"https://via.placeholder.com/200x250?text=Anjali", gender:"Female"},
  {name:"Sneha", img:"https://via.placeholder.com/200x250?text=Sneha", gender:"Female"},
  {name:"Divya", img:"https://via.placeholder.com/200x250?text=Divya", gender:"Female"}
];

let votes = JSON.parse(localStorage.getItem('votes')) || Array(contestants.length).fill(0);
let locked = JSON.parse(localStorage.getItem('locked')) || false;

function renderCards() {
  const container = document.getElementById('cards');
  container.innerHTML = '';
  contestants.forEach((c,i) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <img src="${c.img}" alt="${c.name}">
      <h3>${c.name} (${c.gender})</h3>
      <button class="vote-btn" onclick="vote(${i})" ${locked?'disabled':''}>Vote</button>
    `;
    container.appendChild(card);
  });
}

function vote(i) {
  if(!localStorage.getItem('voted')) {
    votes[i]++;
    localStorage.setItem('votes', JSON.stringify(votes));
    localStorage.setItem('voted','true');
    alert('Vote submitted!');
    renderCards();
  } else {
    alert('You have already voted!');
  }
}

function toggleResults() {
  const modal = document.getElementById('resultsModal');
  const list = document.getElementById('resultsList');
  if(modal.style.display==='block'){
    modal.style.display='none';
  } else {
    list.innerHTML='';
    votes.forEach((v,i)=>{
      const li = document.createElement('li');
      li.textContent = `${contestants[i].name} (${contestants[i].gender}): ${v} votes`;
      list.appendChild(li);
    });
    modal.style.display='block';
  }
}

function resetVotes() {
  if(confirm('Reset all votes?')) {
    votes = Array(contestants.length).fill(0);
    localStorage.setItem('votes', JSON.stringify(votes));
    localStorage.removeItem('voted');
    renderCards();
    toggleResults();
  }
}

function toggleLock() {
  const pass = prompt('Enter admin password:');
  if(pass==='saptarang123'){ // change password if you want
    locked = !locked;
    localStorage.setItem('locked', JSON.stringify(locked));
    alert(locked?'Voting is now LOCKED':'Voting is now UNLOCKED');
    renderCards();
  } else {
    alert('Wrong password!');
  }
}

document.addEventListener('keydown',(e)=>{
  if(e.key==='R'||e.key==='r') toggleResults();
  if(e.ctrlKey && e.altKey && e.key==='r') resetVotes();
  if(e.key==='L'||e.key==='l') toggleLock();
});

renderCards();
</script>
</body>
</html>